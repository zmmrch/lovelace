<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lovelace Digital Arts</title>
    <link rel="stylesheet" href="./styles/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollToPlugin.min.js"></script>
    <script src="./scripts/iridiscense.js"></script>
    
</head>
<body>
    <div class="background-image"></div>
    
    <img src="./img/SUPERPOSICIÓN IZQ.png" alt="Imagen izquierda" loading="lazy" class="moving-image" id="left-image">
    <img src="./img/SUPERPOSICIÓN DER.png" alt="Imagen derecha" loading="lazy" class="moving-image" id="right-image">
    <img src="./img/Sin título-1.png" alt="logo" loading="lazy" id="logo">

    <div class="container-chevrons">
        <div class="chevron"></div>
        <div class="chevron"></div>
        <div class="chevron"></div>
        <span class="text">Scroll down</span>
    </div>

    <div class="card">
        <a href="./portfolio.html"><div class="card-item"><img src="./img/TARJETA PORTFOLIO.png" alt="tarjeta_portfolio" loading="lazy" id="tarjeta_portfolio"></div></a>
        <a href="./servicios.html"><div class="card-item"><img src="./img/TARJETA SERVICIOS.png" alt="tarjeta_servicios" loading="lazy" id="tarjeta_servicios"></div></a>
        <a href="./hablemos.html"><div class="card-item"><img src="./img/TARJETA HABLEMOS.png" alt="tarjeta_hablemos" loading="lazy" id="tarjeta_hablemos"></div"></a>
    </div>

    <script>
        const isMobileDevice = () => {
        return (window.innerWidth <= 768) || 
                ('ontouchstart' in window) ||
                (navigator.maxTouchPoints > 0);
        };

        const leftImage = document.getElementById('left-image');
        const rightImage = document.getElementById('right-image');
        const logo = document.getElementById('logo');
        const cards = document.querySelectorAll('.card');

        const config = {
        desktop: {
            imageMovement: 0.25,
            logoStartSize: 1,
            logoEndSize: -0.1,
            logoStartTop: 50,
            logoEndTop: -20,
            logoStartLeft: 50,
            logoEndLeft: -25,
            cardVisibilityThreshold: 0.9
        },
        mobile: {
            imageMovement: 0.15,
            logoStartSize: 0.7,
            logoEndSize: -0.05,
            logoStartTop: 50,
            logoEndTop: -10,
            logoStartLeft: 50,
            logoEndLeft: -15,
            cardVisibilityThreshold: 0.8
        }
        };

        let lastScrollTop = 0;

        const handleScroll = () => {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
        const scrollPercentage = scrollTop / scrollHeight;

        const isMobile = isMobileDevice();
        const currentConfig = isMobile ? config.mobile : config.desktop;

        // Determinar la dirección del scroll
        const scrollingDown = scrollTop > lastScrollTop;
        lastScrollTop = scrollTop;

        // Mover imágenes laterales horizontalmente
        const movement = window.innerWidth * currentConfig.imageMovement * scrollPercentage;
        leftImage.style.transform = `translateX(${-movement}px) translateY(-50%)`;
        rightImage.style.transform = `translateX(${movement}px) translateY(-50%)`;

        // Mover y reducir el logo
        const maxScroll = window.innerHeight;
        const scrollProgress = Math.min(scrollTop / maxScroll, 1);

        const currentSize = currentConfig.logoStartSize - 
                            (currentConfig.logoStartSize - currentConfig.logoEndSize) * scrollProgress;
        const currentTop = currentConfig.logoStartTop - 
                            (currentConfig.logoStartTop - currentConfig.logoEndTop) * scrollProgress;
        const currentLeft = currentConfig.logoStartLeft - 
                            (currentConfig.logoStartLeft - currentConfig.logoEndLeft) * scrollProgress;

        const transform = `translate(-50%, -50%) scale(${currentSize})`;
        logo.style.top = `${currentTop}%`;
        logo.style.left = `${currentLeft}%`;
        logo.style.transform = transform;

        // Mostrar u ocultar tarjetas
        cards.forEach((card, index) => {
            const cardTop = card.offsetTop;
            const cardVisible = cardTop < scrollTop + window.innerHeight * currentConfig.cardVisibilityThreshold;
            if (cardVisible && scrollingDown) {
            setTimeout(() => {
                card.classList.add('card-visible');
            }, isMobile ? index * 150 : index * 200);
            } else if (!cardVisible || !scrollingDown) {
            card.classList.remove('card-visible');
            }
        });
        };

        window.addEventListener('scroll', handleScroll);
        window.addEventListener('resize', () => {
        window.requestAnimationFrame(handleScroll);
        });
    </script>

    
</body>
</html>